AIRNovelのtransitionに関するメモ

通常の[trans]
現在の画面のスクリーンショット(以下SS)を撮り、最前面に表示
[trans]後のSSを撮り表SSの直下に表示。
表のSSを徐々に透明にしていく。
透明になったところで、[trans]操作。
いらなくなったSSを非表示に。

ルール有り[trans]
現在の画面のスクリーンショット(以下SS)を撮り、最前面に表示
[trans]後のSSを撮りalpha=0で最前面に表示。
時間経過とルール画像を照らし合わせてピクセル毎にalpha=1に。
裏のSSが全部表示されたところで[trans]操作。
いらなくなったSSを非表示に。

という作業が行われているため、[trans]開始から終了までに行った操作は、
終了してようやく見えてきます。
そして、タグによっては不具合が起きるので、基本[trans]中は表示系はいじらないように。


[trans_plus]の場合。
color系
最前面に一面塗りつぶしを用意。Outは最初alpha=0。
alpha=1の時点で[trans]操作。
Inはalpha=0にしていく。

その他
Inは指定されたレイヤの裏、プラグイン、c_flayerのSSを撮り、
指定された物の一番上の上に初期表示。
そのSSを全画面表示のalpha=1にする。
[trans]操作。
SS削除。

Outは指定されたレイヤの裏、プラグイン、c_flayerのSSを撮り、
指定された物の一番上の上に全画面表示のalpha=1。
[trans]操作。
SSを指定された状態に変更する。
SS削除。

そういうわけでSSに関係ない方はアニメなら動いています。
ただ、指定されたレイヤしかSSを撮らないので、
挟まれたレイヤももれなく指定する必要があります。
ずっと非表示なら不要ですが。

[trans_plus]の場合の[trans]操作には、
layer指定分を[trans]させる他に
c_flayerのvisible変更、c_pluginのvisible変更が含まれています。
一度に、複数レイヤ、プラグインのvisibleを変更する場合にtime=0で使うという手もあります。
必須属性の判定よりもtime=0判定が先ですので、layerやtypeを省略可能です。
